{{/* ---------------- RATING LOGIC ---------------- */}}

{{ $rating := .Get "rating" | default "" }}
{{ $score := 0 }}

{{ if $rating }}
  {{ $score = int $rating }}
{{ end }}

{{ $color := "" }}
{{ if ge $score 9 }}
  {{ $color = "rating-high" }}
{{ else if ge $score 7 }}
  {{ $color = "rating-mid" }}
{{ else if gt $score 0 }}
  {{ $color = "rating-low" }}
{{ end }}


{{/* ---------------- PLATFORM LOGIC ---------------- */}}

{{ $platformRaw := .Get "platform" | default "" }}
{{ $platform := lower $platformRaw }}

{{ $btnText := "‚¨á Download" }}
{{ if $platformRaw }}
  {{ $btnText = printf "‚¨á Download for %s" $platformRaw }}
{{ end }}

{{ $btnClass := "download-btn" }}

{{ if in $platform "pc" }}
  {{ $btnClass = printf "%s btn-pc" $btnClass }}
{{ else if or (in $platform "ps") (in $platform "playstation") }}
  {{ $btnClass = printf "%s btn-ps" $btnClass }}
{{ else if in $platform "xbox" }}
  {{ $btnClass = printf "%s btn-xbox" $btnClass }}
{{ else if in $platform "/" }}
  {{ $btnClass = printf "%s btn-multi" $btnClass }}
{{ end }}


<div class="game-card">
<div class="card-details">
<strong>üéÆ Game:</strong> {{ .Get "game" }}<br>

{{ with .Get "dev" }}
<strong>üßë‚Äçüíª Developer:</strong> {{ . }}<br>
{{ end }}

{{ with .Get "date" }}
<strong>üóì Release:</strong> {{ . }}<br>
{{ end }}

{{ with $platformRaw }}
<strong>üè∑ Platform:</strong> {{ . }}<br>
{{ end }}

{{ if $rating }}
<strong>‚≠ê My Rating:</strong>
<span class="{{ $color }}">{{ $rating }}/10</span>
{{ end }}

{{ with .Get "size" }}
<br><strong>üíæ File Size:</strong> {{ . }}
{{ end }}

{{ if or (.Get "review") (.Get "download") }}
<br><br>
{{ end }}

{{ with .Get "review" }}
<a href="{{ . }}" class="button">‚ñ∂ Read Review</a>
{{ end }}
</div>
<div class="card-down">
{{ with .Get "download" }}
<a href="{{ . }}" class="button {{ $btnClass }}" target="_blank" rel="noopener">
  {{ $btnText }}
</a>
{{ end }}
</div>
</div>
